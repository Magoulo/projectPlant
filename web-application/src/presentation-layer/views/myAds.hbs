<!-- My Ads -->
<!-- tab navigation -->
<nav>
	<div class="nav nav-tabs" id="nav-tab" role="tablist">

		<button class="nav-link active" id="nav-manage-ads-tab" data-bs-toggle="tab" data-bs-target="#nav-manage-ads"
			type="button" role="tab" aria-controls="nav-manage-ads" aria-selected="true">
			Manage My Ads
		</button>

		<button class="nav-link" id="nav-ad-offers-tab" data-bs-toggle="tab" data-bs-target="#nav-ad-offers"
			type="button" role="tab" aria-controls="nav-ad-offers" aria-selected="false">
			My Ad Offers
		</button>

		<button class="nav-link" id="nav-closed-ads-tab" data-bs-toggle="tab" data-bs-target="#nav-closed-ads"
			type="button" role="tab" aria-controls="nav-closed-ads" aria-selected="false">
			My Closed Ads
		</button>

	</div>
</nav>


<!-- navigation content -->
<div class="tab-content" id="nav-tabContent">

	<!-- Manage ads -->
	<div class="tab-pane fade show active" id="nav-manage-ads" role="tabpanel" aria-labelledby="nav-manage-ads-tab">

		<div class="row my-5">
			<div class="col-4 text-start d-grid gap-2">
				<a href="/ads/adCreate"><button type="button" class="btn btn-lg btn-outline-dark">Create new
						ad</button></a>
			</div>
			<div class="col-auto"></div>
		</div>

		{{#if errors.length}}
		<p class="text-center">Oh no, something went wrong:</p>

		<ul>
			{{#each errors}}
			<li>{{this}}</li>
			{{/each}}
		</ul>

		{{else}}
		{{#if Ad}}

		<div class="row justify-content-start align-items-center">
			{{#each Ad}}
			<div id="ad" class="col-3 text-center">

				<div class="col-12">
					<h3>{{title}}
						{{#if isClosed}}
						(Closed)
						{{/if}}
					</h3>
				</div>

				<div class="col-12">
					<img class="img-thumbnail" src="/images/{{ImageBundle.coverImagePath}}" class="flowerImage"
						style="width: 300px; height: 300px">
				</div>

				<div class="col-12 mt-2 mb-5">
					<div class="row justify-content-center">
						<div class="col-auto mx-1">
							<a class="btn btn-outline-dark m-1" href="/ads/adUpdate/{{id}}">Update</a>
						</div>
						<div class="col-auto mx-1">
							<a class="btn btn-outline-danger m-1" href="/ads/adDelete/{{id}}">Delete</a>
						</div>
					</div>
				</div>

			</div>
			{{/each}}
		</div>

		{{else}}
		<div class="col-12 text-center">
			<p>No, your ads doesn't exist.</p>
		</div>
		{{/if}}
		{{/if}}
	</div>

	<div class="tab-pane fade" id="nav-ad-offers" role="tabpanel" aria-labelledby="nav-ad-offers-tab">
		<div class="row">
			<div class="col-12">

				<div class="card card-body">

					{{#if errors.length}}
					<p class="text-center">Oh no, something went wrong:</p>

					<ul>
						{{#each errors}}
						<li>{{this}}</li>
						{{/each}}
					</ul>

					{{else}}
					{{#if Ad}}

					{{#each Ad}}
					{{#unless isClosed}}

					<div class="card">
						<div class="card-body">
							<div class="row justify-content-between">

								<div id="card-element" class="col-auto text-center">
									<img class="img-card" src="/images/{{ImageBundle.coverImagePath}}">
								</div>

								<div id="card-element" class="col-6 text-start align-self-center">
									<h1>{{title}}</h1>
								</div>

								<div class="col-auto text-center align-self-end">
									<button id="card-element" class="btn btn-outline-dark my-2" type="button"
										data-bs-toggle="collapse" data-bs-target="#id{{id}}ad" aria-expanded="false"
										aria-controls="collapseExample">
										Show offers <i class="bi bi-caret-down"></i>
									</button>
								</div>

							</div>
						</div>
					</div>

					<hr>

					<div class="collapse" id="id{{id}}ad">
						<div class="card card-body">
							{{#each this.bids}}

							<!-- Accept Bid Modal -->
							<div class="modal fade" id="acceptBidID{{id}}Modal" tabindex="-1"
								aria-labelledby="exampleModalLabel" aria-hidden="true">
								<div class="modal-dialog modal-dialog-centered">
									<div class="modal-content">

										<div class="modal-header">
											<h3 class="modal-title" id="exampleModalLabel">Accept bid for
												"{{../title}}?"</h3>
											<button type="button" class="btn-close" data-bs-dismiss="modal"
												aria-label="Close"></button>
										</div>

										<form action="/bids/updateBid/{{id}}/Accepted" method="POST"
											encType="multipart/form-data">
											<div class="modal-body">

												<input type="hidden" name="adID" value="{{adID}}">

												<input type="hidden" name="_csrf" value="{{csrfToken}}">

												<div class="mb-0">

													<h3>{{User.firstName}} {{User.lastName}}</h3>

													<p>{{message}}</p>
												</div>

												<div class="mb-0">
													<img class="img-thumbnail" src="/images/{{imagePath}}"
														alt="imageToID{{adID}}" style="width: 400px; height: 400px">
												</div>

											</div>

											<div class="modal-footer">
												<button type="submit" class="btn btn-outline-success">confirm</button>
											</div>
										</form>

									</div>
								</div>
							</div>

							<!-- Decline Bid Modal -->
							<div class="modal fade" id="declineBidID{{id}}Modal" tabindex="-1"
								aria-labelledby="exampleModalLabel" aria-hidden="true">
								<div class="modal-dialog modal-dialog-centered">
									<div class="modal-content">

										<div class="modal-header">
											<h3 class="modal-title" id="exampleModalLabel">Decline bid for
												"{{../title}}?"</h3>
											<button type="button" class="btn-close" data-bs-dismiss="modal"
												aria-label="Close"></button>
										</div>

										<form action="/bids/updateBid/{{id}}/Declined" method="POST"
											encType="multipart/form-data">
											<div class="modal-body">

												<input type="hidden" name="adID" value="{{ad.adID}}">

												<input type="hidden" name="_csrf" value="{{csrfToken}}">

												<div class="mb-0">
													<h3>{{User.firstName}} {{User.lastName}}</h3>
													<p>{{message}}</p>
												</div>

												<div class="mb-0">
													<img class="img-thumbnail" src="/images/{{imagePath}}"
														alt="imageToID{{adID}}" style="width: 400px; height: 400px">
												</div>

											</div>

											<div class="modal-footer">
												<button type="submit" class="btn btn-outline-dark">confirm</button>
											</div>
										</form>

									</div>
								</div>
							</div>

							<div class="row my-2 justify-content-between">
								<div class="col-8 text start">

									<div class="row justify-content-between mb-2">
										<div class="col-8">
											<h3>{{User.firstName}} {{User.lastName}}</h3>
											<p>Placed: {{date}}</p>
										</div>

										<!-- Modal Buttons -->
										<div class="col-4 text-end">
											<button class="btn btn-outline-danger m-1" data-bs-toggle="modal"
												data-bs-target="#declineBidID{{id}}Modal">Decline</button>
											<button class="btn btn-outline-dark m-1" data-bs-toggle="modal"
												data-bs-target="#acceptBidID{{id}}Modal">Accept</button>
										</div>
									</div>

									<p class="mt-2">{{message}}</p>
								</div>

								<div class="col-auto text-center">
									<img class="flowerImage" src="/images/{{imagePath}}" alt="imageToID{{adID}}"
										style="width: 400px; height: 400px">
								</div>
							</div>

							<hr>
							{{/each}}
						</div>
					</div>

					{{/unless}}
					{{/each}}
					{{else}}
					<div class="col-12 text-center">
						<p>No, your ads doesn't exist.</p>
					</div>
					{{/if}}
					{{/if}}
				</div>


			</div>
			<div class="col-auto"></div>
		</div>
	</div>

	<!-- My Closed Ads -->

	<div class="tab-pane fade card card-body" id="nav-closed-ads" role="tabpanel" aria-labelledby="nav-closed-ads-tab">
		<div class="row justify-content-start">
			{{#if adAccepted}}
			{{#each adAccepted}}
			<div>
				<div class="card card-body">
					<div class="row">

						<div class="col-2 text-center">
							<img src="/images/{{ImageBundle.coverImagePath}}" alt="{{imageBundleID}}"
								class="flowerImage" style="width: 200px; height: 200px">
						</div>

						<div class="col-8 text-start align-self-center">
							<h1>{{title}}</h1>
						</div>

						<div class="col-2 text-center align-self-end">
							<button class="btn btn-primary" type="button" data-bs-toggle="collapse"
								data-bs-target="#id{{id}}ad" aria-expanded="false" aria-controls="collapseExample">
								Show Accepted offer <i class="bi bi-caret-down"></i>
							</button>
						</div>

					</div>
				</div>
			</div>

			<div class="collapse" id="id{{id}}ad">
				<div class="card card-body">

					<div class="row">
						<div class="col-8 text start">
							<h3>{{Bids.User.firstName}} {{Bids.User.lastName}}</h3>
							<p>{{Bids.message}}</p>
						</div>
						<div class="col-4 text-center">
							<div class="col-12">
								<img class="flowerImage" src="/images/{{Bids.imagePath}}" alt="imageToID{{adID}}"
									style="width: 400px; height: 400px">
							</div>
						</div>
					</div>

				</div>
			</div>
			{{/each}}
			{{else}}
			<div class="col-12 text-center">
				<p>No, your ads doesn't exist.</p>
			</div>
			{{/if}}
		</div>
	</div>





</div>